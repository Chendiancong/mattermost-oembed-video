!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=4)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e){e.exports=[{name:"Dailymotion",width:480,height:360},{name:"PeerTube",width:560,height:315},{name:"Vimeo",width:480,height:270},{name:"YouTube",width:200,height:150}]},function(e){e.exports=[{provider_name:"PeerTube",provider_url:"http://tube.aslead.cloud",endpoints:[{schemes:["https://tube.aslead.cloud/w/*","https://tube.aslead.cloud/video/*"],url:"https://tube.aslead.cloud/services/oembed",discovery:!0}]},{provider_name:"Dailymotion",provider_url:"https://www.dailymotion.com",endpoints:[{schemes:["https://www.dailymotion.com/video/*"],url:"https://www.dailymotion.com/services/oembed",discovery:!0}]},{provider_name:"Vimeo",provider_url:"https://vimeo.com/",endpoints:[{schemes:["https://vimeo.com/*","https://vimeo.com/album/*/video/*","https://vimeo.com/channels/*/*","https://vimeo.com/groups/*/videos/*","https://vimeo.com/ondemand/*/*","https://player.vimeo.com/video/*"],url:"https://vimeo.com/api/oembed.{format}",discovery:!0}]},{provider_name:"YouTube",provider_url:"https://www.youtube.com/",endpoints:[{schemes:["https://*.youtube.com/watch*","https://*.youtube.com/v/*","https://youtu.be/*"],url:"https://www.youtube.com/oembed",discovery:!0}]}]},function(e,t,o){e.exports=o(5)},function(e,t,o){"use strict";o.r(t);const n="com.mattermost.without-proxy";var r=o(1),i=o.n(r),s=o(0),u=o.n(s),l=o(3),c=o(2);const a=["Twitter","YouTube"],m=/\.{format}/;function d(e){let t=null;return l.forEach(o=>{(o.endpoints[0].schemes||[]).some(t=>{return new RegExp(t.replace(/\*/g,".*")).test(e)})&&c.some(({name:e})=>e===o.provider_name)&&!a.some(e=>e===o.provider_name)&&(t=o)}),t}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class h extends s.Component{constructor(e){super(e),this.oembedUrl=function(e){let t=d(e).endpoints[0].url,o="?url=".concat(encodeURIComponent(e));return m.test(t)?t=t.replace(m,".json"):o+="&format=json",t+o}(this.props.embed.url);const t=d(this.props.embed.url);var o;this.dimensions=(o=t.provider_name,c.find(({name:e})=>e===o)),this.state={html:null,thumbnailUrl:null}}componentDidMount(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:this.oembedUrl};fetch("/plugins/".concat(n,"/"),e).then(e=>e.json()).then(e=>{e.html?this.setState({html:e.html}):this.setState({thumbnailUrl:e.thumbnail_url})}).catch(e=>{console.error(e)})}render(){const{html:e,thumbnailUrl:t}=this.state;if(null===this.dimensions)return u.a.createElement("p",null,"Plugin error: Invalid oEmbed provider dimensions");const o={width:"".concat(this.dimensions.width,"px"),height:"".concat(this.dimensions.height,"px")},n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){p(e,t,o[t])})}return e}({},o,{border:0});let r;return e&&(r=e.startsWith("<iframe")?u.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}}):u.a.createElement("iframe",{style:n,src:"data:text/html,".concat(e)})),t&&(r=u.a.createElement("img",{src:t})),u.a.createElement("div",{style:o},r)}}p(h,"propTypes",{embed:i.a.shape({url:i.a.string.isRequired})}),o.d(t,"default",function(){return b});class b{initialize(e,t){e.registerPostWillRenderEmbedComponent(({url:e})=>Boolean(d(e)),h,!0)}}window.registerPlugin(n,new b)}]);